<html>
	<head>
        <title>네이비필드 수병계산기 Global server</title>
    </head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        body {font-family: "Lato", sans-serif}
        .mySlides {display: none}
    </style>

	<body>
        <!-- Navbar -->
        <div class="w3-top">
            <div class="w3-bar w3-black w3-card">
                <a class="w3-bar-item w3-button w3-padding-large w3-hide-medium w3-hide-large w3-right" href="javascript:void(0)" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
                <a href="../" class="w3-bar-item w3-button w3-padding-large">Navyfield Simulator &nbsp;&nbsp;&nbsp; by g_dori</a>
                <a href="https://nfsim.blogspot.com/" class="w3-bar-item w3-button w3-padding-large w3-hide-small">BLOG</a>
                <a href="https://gall.dcinside.com/board/view/?id=nf&no=363613" class="w3-bar-item w3-button w3-padding-large w3-hide-small">코코마지침서</a>
                <div class="w3-dropdown-hover w3-hide-small">
                    <button class="w3-padding-large w3-button" title="More">수병계산기 <i class="fa fa-caret-down"></i></button>     
                    <div class="w3-dropdown-content w3-bar-block w3-card-4">
                        <a href="../" class="w3-bar-item w3-button">수병계산기 KR server</a>
                        <a href="./" class="w3-bar-item w3-button">수병계산기 Global server</a>
                    </div>
                </div>
                <div class="w3-dropdown-hover w3-hide-small">
                    <button class="w3-padding-large w3-button" title="More">그 외 계산기<i class="fa fa-caret-down"></i></button>     
                    <div class="w3-dropdown-content w3-bar-block w3-card-4">
                        <a href="https://nfsim.blogspot.com/2021/05/blog-post_12.html" class="w3-bar-item w3-button">연사구간 계산기</a>
                        <a href="https://nfsim.blogspot.com/2021/05/blog-post_5.html" class="w3-bar-item w3-button">함선전체 수리/기관 계산기</a>
                        <a href="../Pompom/" class="w3-bar-item w3-button">폼폼이 만연사 계산기</a>
                        <a href="../Guideline/" class="w3-bar-item w3-button">함장 빨랫줄 계산기</a>
                    </div>
                </div>
                <div class="w3-dropdown-hover w3-hide-small">
                    <button class="w3-padding-large w3-button" title="More">정보<i class="fa fa-caret-down"></i></button>     
                    <div class="w3-dropdown-content w3-bar-block w3-card-4">
                        <a href="https://nfsim.blogspot.com/2021/10/blog-post.html" class="w3-bar-item w3-button">연사속도공식</a>
                        <a href="https://nfsim.blogspot.com/2021/04/blog-post_88.html" class="w3-bar-item w3-button">찰기건너뛰기 전직</a>
                        <a href="https://nfsim.blogspot.com/2021/05/2.html" class="w3-bar-item w3-button">갑판병효율</a>
                        <a href="https://nfsim.blogspot.com/2021/05/blog-post_3.html" class="w3-bar-item w3-button">이벤트수병의 초기어빌</a>
                        <a href="https://nfsim.blogspot.com/2021/05/1.html" class="w3-bar-item w3-button">영국 연사포병 늦전직</a>
                        <a href="https://nfsim.blogspot.com/2021/05/blog-post.html" class="w3-bar-item w3-button">함포 연사속도 단위</a>
                    </div>
                </div>
                <a href="javascript:void(0)" class="w3-padding-large w3-hover-red w3-hide-small w3-right"><i class="fa fa-search"></i></a>
            </div>
        </div>

        <!-- Navbar on small screens (remove the onclick attribute if you want the navbar to always show on top of the content when clicking on the links) -->
        <div id="navDemo" class="w3-bar-block w3-black w3-hide w3-hide-large w3-hide-medium w3-top" style="margin-top:46px">
            <a href="../" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">수병계산기 KR server</a>
            <a href="./" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">수병계산기 Global server</a>
            <a href="https://nfsim.blogspot.com/2021/05/blog-post_12.html" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">연사구간 계산기</a>
            <a href="https://nfsim.blogspot.com/2021/05/blog-post_5.html" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">함선전체 수리/기관 계산기</a>
            <a href="../Pompom/" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">폼폼이 만연사 계산기</a>
            <a href="../Guideline/" class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">함장 빨랫줄 계산기</a>
        </div>




        <div class="w3-content" style="max-width:2000px;margin-top:46px">





        <h1>수병계산기 Global server</h1>
        by g_dori # DCinside 네이비필드갤러리
        <br>
        <br>
        <h4>수병정보 입력</h4>
        <form name="sailor_search">
            <label for="nation_sel">국가선택:</label>
            <select name="nation_sel" onchange="searchTree(this);">
                <option>--국가선택--</option>
                <option value="미국">미국</option>
                <option value="영국">영국</option>
                <option value="일본">일본</option>
                <option value="독일">독일</option>
                <option value="프랑스">프랑스</option>
                <option value="소련">소련</option>
                <option value="이탈리아">이탈리아</option>
            </select>
              입력확인: 
            <span id="nation_sel">국가를 선택해주세요</span>
            <br>
            <label for="tree_sel">병종선택:</label>
            <select name="tree_sel" onchange="treeip(this);">
                <option>--병종선택--</option>
            </select>
              입력확인: 
            <span id="tree_sel">병종을 선택해주세요</span>
            <br>
            <label for="LEVIP">수병레벨: </label><input type="number" id="LEVIP" name="LEVIP" value="125" min="2" max="125">
            <br>
            <br>
            <h4>초기어빌 입력</h4>
            <label for="POTIP">잠재:&nbsp;</label><input type="number" id="POTIP" name="POTIP" value="10" min="7" max="18" size="2">
            <label for="ACCIP">명중:&nbsp;</label><input type="number" id="ACCIP" name="ACCIP" value="10" min="7" max="18" size="2">
            <label for="RLDIP">연사:&nbsp;</label><input type="number" id="RLDIP" name="RLDIP" value="10" min="7" max="18" size="2">

            <label for="TORIP">어뢰:&nbsp;</label><input type="number" id="TORIP" name="TORIP" value="10" min="7" max="18" size="2">
            <label for="AAWIP">대공:&nbsp;</label><input type="number" id="AAWIP" name="AAWIP" value="10" min="7" max="18" size="2">
            <br>
            <label for="REPIP">수리:&nbsp;</label><input type="number" id="REPIP" name="REPIP" value="10" min="7" max="18" size="2">
            <label for="RESIP">보수:&nbsp;</label><input type="number" id="RESIP" name="RESIP" value="10" min="7" max="18" size="2">
            <label for="ENGIP">기관:&nbsp;</label><input type="number" id="ENGIP" name="ENGIP" value="10" min="7" max="18" size="2">

            <label for="AIRIP">함재:&nbsp;</label><input type="number" id="AIRIP" name="AIRIP" value="10" min="7" max="18" size="2">
            <label for="FIGIP">전투:&nbsp;</label><input type="number" id="FIGIP" name="FIGIP" value="10" min="7" max="18" size="2">
            <label for="BOMIP">폭격:&nbsp;</label><input type="number" id="BOMIP" name="BOMIP" value="10" min="7" max="18" size="2">
            <br>
            <br>
            <h4>강화여부 입력</h4>
            <input type="radio" id="20%강화" name="BOOST" value="20%강화"><label for="20%강화">20%강화</label>
            <input type="radio" id="강화없음" name="BOOST" value="강화없음"><label for="강화없음">강화없음</label>
            <br>
            <br>
            <h4>전직트리 확인 & 늦직Lv 입력</h4>
            <table cellpadding="5" cellspacing="0" border="1" style="border-collapse:collapse; border:1px gray solid;">
                <tr>
                    <td>전직1 </td>
                    <td>
                        <span id="tree_1"></span>
                    </td>
                    <td>
                        <span id="tree_1LV"></span>
                    </td>
                    <td>
                        늦직Lv입력: <input type="number" id="tree1" min="12" max="25" size="2">
                    </td>
                </tr>
                <tr>
                    <td>전직2 </td>
                    <td>
                        <span id="tree_2"></span>
                    </td>
                    <td>
                        <span id="tree_2LV"></span>
                    </td>
                    <td>
                        늦직Lv입력: <input type="number" id="tree2" min="12" max="125" size="2">
                    </td>
                </tr>
                <tr>
                    <td>전직3 </td>
                    <td>
                        <span id="tree_3"></span>
                    </td>
                    <td>
                        <span id="tree_3LV"></span>
                    </td>
                    <td>
                        늦직Lv입력: <input type="number" id="tree3" min="12" max="125" size="2">
                    </td>
                </tr>
                <tr>
                    <td>전직4 </td>
                    <td>
                        <span id="tree_4"></span>
                    </td>
                    <td>
                        <span id="tree_4LV"></span>
                    </td>
                    <td>
                        늦직Lv입력: <input type="number" id="tree4" min="12" max="125" size="2">
                    </td>
                </tr>
                <tr>
                    <td>전직5 </td>
                    <td>
                        <span id="tree_5"></span>
                    </td>
                    <td>
                        <span id="tree_5LV"></span>
                    </td>
                    <td>
                        늦직Lv입력: <input type="number" id="tree5" min="12" max="125" size="2">
                    </td>
                </tr>
                <tr>
                    <td>전직6 </td>
                    <td>
                        <span id="tree_6"></span>
                    </td>
                    <td>
                        <span id="tree_6LV"></span>
                    </td>
                    <td>
                        늦직Lv입력: <input type="number" id="tree6" min="12" max="125" size="2">
                    </td>
                </tr>
            </table>
        </form>
        <h3><button onclick="get_result()">실행</button></h3>
        # 늦직계산시에는 늦직Lv 입력후에 한번 더 실행버튼 눌러주세요
        <br>
        <br>
        <h3>계산결과</h3>
        입력확인 // <span id="nation_sel1"></span> <span id="tree_sel1"></span> <span id="LEVIP1"></span> <span id="BOOSTIP1"></span>
        <br>
        <br>
        <table cellpadding="5" cellspacing="0" border="1" style="border-collapse:collapse; border:1px gray solid;">
            <tr>
                <td>
                    
                </td>
                <td>
                    잠재
                </td>
                <td>
                    명중
                </td>
                <td>
                    연사
                </td>
                <td>
                    어뢰
                </td>
                <td>
                    대공
                </td>
                <td>
                    수리
                </td>
                <td>
                    보수
                </td>
                <td>
                    기관
                </td>
                <td>
                    함재
                </td>
                <td>
                    전투
                </td>
                <td>
                    폭격
                </td>
                <td>
                    수병수
                </td>
            </tr>
            <tr>
                <td>
                    성장치
                </td>
                <td>
                    <span id="POTG"></span>
                </td>
                <td>
                    <span id="ACCG"></span>
                </td>
                <td>
                    <span id="RLDG"></span>
                </td>
                <td>
                    <span id="TORG"></span>
                </td>
                <td>
                    <span id="AAWG"></span>
                </td>
                <td>
                    <span id="REPG"></span>
                </td>
                <td>
                    <span id="RESG"></span>
                </td>
                <td>
                    <span id="ENGG"></span>
                </td>
                <td>
                    <span id="AIRG"></span>
                </td>
                <td>
                    <span id="FIGG"></span>
                </td>
                <td>
                    <span id="BOMG"></span>
                </td>
                <td>
                    <span id="NUMG"></span>
                </td>
            </tr>
            <tr>
                <td>
                    누적치
                </td>
                <td>
                    <span id="POTT"></span>
                </td>
                <td>
                    <span id="ACCT"></span>
                </td>
                <td>
                    <span id="RLDT"></span>
                </td>
                <td>
                    <span id="TORT"></span>
                </td>
                <td>
                    <span id="AAWT"></span>
                </td>
                <td>
                    <span id="REPT"></span>
                </td>
                <td>
                    <span id="REST"></span>
                </td>
                <td>
                    <span id="ENGT"></span>
                </td>
                <td>
                    <span id="AIRT"></span>
                </td>
                <td>
                    <span id="FIGT"></span>
                </td>
                <td>
                    <span id="BOMT"></span>
                </td>
                <td>
                    <span id="NUMT"></span>
                </td>
            </tr>
        </table>
		<br>
        <table  cellpadding="5" cellspacing="0" border="1" style="border-collapse:collapse; border:1px gray solid;">
            <tr>
                <td>
                    사관 [명]
                </td>
                <td>
                    100
                </td>
                <td>
                    150
                </td>
                <td>
                    180
                </td>
                <td>
                    200
                </td>
                <td>
                    250
                </td>
                <td>
                    300
                </td>
                <td>
                    40% <br>
                    <span id="NUM40"></span>
                </td>
                <td>
                    45% <br>
                    <span id="NUM45"></span>
                </td>
            </tr>
            <tr>
                <td>
                    수리속도[/s] @ Global
                </td>
                <td>
                    <span id="REP100"></span>
                </td>
                <td>
                    <span id="REP150"></span>
                </td>
                <td>
                    <span id="REP180"></span>
                </td>
                <td>
                    <span id="REP200"></span>
                </td>
                <td>
                    <span id="REP250"></span>
                </td>
                <td>
                    <span id="REP300"></span>
                </td>
                <td>
                    <span id="REP40"></span>
                </td>
                <td>
                    <span id="REP45"></span>
                </td>
            </tr>
            <tr>
                <td>
                    구조방어 @ Global
                </td>
                <td>
                    <span id="RES100"></span>
                </td>
                <td>
                    <span id="RES150"></span>
                </td>
                <td>
                    <span id="RES180"></span>
                </td>
                <td>
                    <span id="RES200"></span>
                </td>
                <td>
                    <span id="RES250"></span>
                </td>
                <td>
                    <span id="RES300"></span>
                </td>
                <td>
                    <span id="RES40"></span>
                </td>
                <td>
                    <span id="RES45"></span>
                </td>
            </tr>
            <tr>
                <td>
                    연사 캡 [%]
                </td>
                <td>
                    <span id="RLD100"></span>
                </td>
                <td>
                    <span id="RLD150"></span>
                </td>
                <td>
                    <span id="RLD180"></span>
                </td>
                <td>
                    <span id="RLD200"></span>
                </td>
                <td>
                    <span id="RLD250"></span>
                </td>
                <td>
                    <span id="RLD300"></span>
                </td>
                <td>
                    <span id="RLD40"></span>
                </td>
                <td>
                    <span id="RLD45"></span>
                </td>
            </tr>
        </table>
        <span id="tentativeout"></span>

		<br>

	</body>



    <script type="text/javascript">

		var origUrl = "https://script.google.com/macros/s/AKfycbwAqd78Yftsnd0xLAs6JfOUNDx2HggsAUgn0L1Cjjp1N__I4L6M/exec?";
		var params = {};
		params["nationinput"] = "";
		params["treeinput"] = "";
        
		function gen_url(){
			var param = "input=" + params["nationinput"] + " - " + params["treeinput"];
			var encoderUrl = encodeURI(origUrl + param);
			return encoderUrl
		}

		function get_result(){
			var encoderUrl = gen_url();
            var treedata = [];
            var abildata = [];

			fetch(encoderUrl)
			.then(response => response.json())
			.then(response => {

                treedata = response["data"]["tree"];
                abildata = response["data"]["abil"];

                //abildata 값으로 검색된 전직횟수 판정
                var tree_n = 0;
                for(i=0; i<treedata.length; i++){
                    if(abildata[i][0] > 0){
                        tree_n = tree_n + 1;
                    }
                }
                //판정한 전직횟수로 배열길이 조정
                treedata.length = tree_n;
                abildata.length = tree_n;

                //수병트리/전직Lv정보 output
                document.getElementById("tree_1").innerHTML = treedata[0];
                if(tree_n > 1){
                    document.getElementById("tree_2").innerHTML = treedata[1];
                    if(tree_n > 2){
                        document.getElementById("tree_3").innerHTML = treedata[2];
                        if(tree_n > 3){
                            document.getElementById("tree_4").innerHTML = treedata[3];
                            if(tree_n > 4){
                                document.getElementById("tree_5").innerHTML = treedata[4];
                                if(tree_n > 5){
                                    document.getElementById("tree_6").innerHTML = treedata[5];
                                }
                            }
                        }
                    }
                }
                document.getElementById("tree_1LV").innerHTML = "전직Lv: " + abildata[0][0];
                if(tree_n > 1){
                    document.getElementById("tree_2LV").innerHTML = "전직Lv: " + abildata[1][0];
                    if(tree_n > 2){
                        document.getElementById("tree_3LV").innerHTML = "전직Lv: " + abildata[2][0];
                        if(tree_n > 3){
                            document.getElementById("tree_4LV").innerHTML = "전직Lv: " + abildata[3][0];
                            if(tree_n > 4){
                                document.getElementById("tree_5LV").innerHTML = "전직Lv: " + abildata[4][0];
                                if(tree_n > 5){
                                    document.getElementById("tree_6LV").innerHTML = "전직Lv: " + abildata[5][0];
                                }
                            }
                        }
                    }
                }


                //입력Lv가져오기

                var levinput = form.LEVIP.value;
                document.getElementById("LEVIP1").innerHTML = "Lv - " + levinput + " / ";
                if(levinput > 125){
                    alert("수병Lv은 125을 넘을 수 없습니다")
                }

                //입력초기어빌가져오기

                var abilgrowth = new Array(12);
                    abilgrowth[0] = form.POTIP.value;
                    abilgrowth[1] = form.ACCIP.value;
                    abilgrowth[2] = form.RLDIP.value;
                    abilgrowth[3] = form.TORIP.value;
                    abilgrowth[4] = form.AAWIP.value;
                    abilgrowth[5] = form.REPIP.value;
                    abilgrowth[6] = form.RESIP.value;
                    abilgrowth[7] = form.ENGIP.value;
                    abilgrowth[8] = form.AIRIP.value;
                    abilgrowth[9] = form.FIGIP.value;
                    abilgrowth[10] =form.BOMIP.value;
                    abilgrowth[11] = 5;


                var abilcalc = Array.from(Array(tree_n), () => Array(12).fill(0));
                var abiltotal = [25,25,25,25,25,25,25,25,25,25,25,55];

                // Lv1 초기누적어빌 반영 *플미/개근/전설 > 초기30
                for(i=0;i<11;i++){
                    if(abilgrowth[i] >= 13){
                        abiltotal[i] = 30;
                        if(i==1||i==2){
                            abiltotal[1] = 30;
                            abiltotal[2] = 30;
                        }
                    }
                }

                //강화여부체크 > 적용
                var boostcheck = {};
                boostcheck = form.BOOST.value;
                if(boostcheck == ""){
                    boostcheck = "없음"
                }
                document.getElementById("BOOSTIP1").innerHTML = " 강화 - " + boostcheck;


                //국가보너스 어빌 계산
                if(params["nationinput"] == "미국"){
                    abiltotal[9] = abiltotal[9] + 5; }
                else if(params["nationinput"] == "영국"){
                    abiltotal[5] = abiltotal[5] + 3; }
                else if(params["nationinput"] == "일본"){
                    abiltotal[3] = abiltotal[3] + 2; }
                else if(params["nationinput"] == "독일"){
                    abiltotal[1] = abiltotal[1] + 4;
                    abiltotal[2] = abiltotal[2] + 4;
                    abiltotal[7] = abiltotal[7] + 2;
                    abiltotal[9] = abiltotal[9] + 2; }
                else if(params["nationinput"] == "프랑스"){
                    abiltotal[6] = abiltotal[6] + 2; }
                else if(params["nationinput"] == "소련"){
                    abiltotal[1] = abiltotal[1] + 4;
                    abiltotal[2] = abiltotal[2] + 4;
                    abiltotal[7] = abiltotal[7] + 2;
                    abiltotal[9] = abiltotal[9] + 2; }
                else if(params["nationinput"] == "이탈리아"){
                    abiltotal[2] = abiltotal[2] + 8;
                    abiltotal[9] = abiltotal[9] + 2; }

                //입력초기어빌분 계산
                for(r=0;r<12;r++){
                    abiltotal[r] = abiltotal[r] + ( (levinput*1-1)*abilgrowth[r]);
                }

                //늦직입력분 반영

                var treelev = new Array(6);
                    treelev[0] = form.tree1.value;
                    treelev[1] = form.tree2.value;
                    treelev[2] = form.tree3.value;
                    treelev[3] = form.tree4.value;
                    treelev[4] = form.tree5.value;
                    treelev[5] = form.tree6.value;

                for(i=0; i<tree_n; i++){
                    if(treelev[i] == ""){
                        continue;
                    }
                    if(abildata[i][0] > treelev[i]){
                        alert("늦직Lv은 본래의 전직Lv보다 더 높아야 합니다")
                    }
                    abildata[i][0] = treelev[i];
                }
                
                //늦직입력 - 전직안하는 트리분 반영
                for(i=tree_n; i>1; i--){
                    if(treelev[i-1] == "" && treelev[i-2] != ""){
                        tree_n = i-1;
                    }
                }


                // 수병트리영향분 계산
                for(i=0; i<tree_n; i++){
                    if(levinput*1 < abildata[i][0]){
                        continue;
                    }
                    for(r=0; r<12; r++){
                        if(abildata[i][r+1] == ""){
                            abildata[i][r+1] = 0;
                        }
                        abilgrowth[r] = abilgrowth[r]*1 + abildata[i][r+1]*1;
                        abilcalc[i][r] = abilcalc[i][r] + ((levinput*1-abildata[i][0]*1)*abildata[i][r+1]);
                    }
                }


                // 입력초기어빌 + 수병트리영향분 합산
                for(i=0; i<tree_n; i++){
                    for(r=0; r<12; r++){
                        abiltotal[r] = abiltotal[r] + abilcalc[i][r];
                        if(abiltotal[r] < 0){
                            abiltotal[r] = 0;
                        }
                    }
                }

                if(boostcheck == "20%강화"){
                    for(r=0; r<11; r++){
                        abilgrowth[r] = Math.floor(abilgrowth[r]*1.225);
                        abiltotal[r] = Math.floor(abiltotal[r]*1.225);
                    }
                }


                //성장어빌-수병수
                document.getElementById("POTG").innerHTML = abilgrowth[0];
                document.getElementById("ACCG").innerHTML = abilgrowth[1];
                document.getElementById("RLDG").innerHTML = abilgrowth[2];
                document.getElementById("TORG").innerHTML = abilgrowth[3];
                document.getElementById("AAWG").innerHTML = abilgrowth[4];
                document.getElementById("REPG").innerHTML = abilgrowth[5];
                document.getElementById("RESG").innerHTML = abilgrowth[6];
                document.getElementById("ENGG").innerHTML = abilgrowth[7];
                document.getElementById("AIRG").innerHTML = abilgrowth[8];
                document.getElementById("FIGG").innerHTML = abilgrowth[9];
                document.getElementById("BOMG").innerHTML = abilgrowth[10];
                document.getElementById("NUMG").innerHTML = abilgrowth[11];
                
                //누적어빌-수병수
                document.getElementById("POTT").innerHTML = abiltotal[0];
                document.getElementById("ACCT").innerHTML = abiltotal[1];
                document.getElementById("RLDT").innerHTML = abiltotal[2];
                document.getElementById("TORT").innerHTML = abiltotal[3];
                document.getElementById("AAWT").innerHTML = abiltotal[4];
                document.getElementById("REPT").innerHTML = abiltotal[5];
                document.getElementById("REST").innerHTML = abiltotal[6];
                document.getElementById("ENGT").innerHTML = abiltotal[7];
                document.getElementById("AIRT").innerHTML = abiltotal[8];
                document.getElementById("FIGT").innerHTML = abiltotal[9];
                document.getElementById("BOMT").innerHTML = abiltotal[10];
                document.getElementById("NUMT").innerHTML = abiltotal[11];

                //사관숫자계산
                var NUM40 = Math.floor(abiltotal[11]*0.4);
                var NUM45 = Math.floor(abiltotal[11]*0.45);

                document.getElementById("NUM40").innerHTML = NUM40;
                document.getElementById("NUM45").innerHTML = NUM45;


                //수리속도계산
                document.getElementById("REP100").innerHTML = Math.floor(abiltotal[5]*(abiltotal[11] + 3*100)/13630)/10;
                document.getElementById("REP150").innerHTML = Math.floor(abiltotal[5]*(abiltotal[11] + 3*150)/13630)/10;
                document.getElementById("REP180").innerHTML = Math.floor(abiltotal[5]*(abiltotal[11] + 3*180)/13630)/10;
                document.getElementById("REP200").innerHTML = Math.floor(abiltotal[5]*(abiltotal[11] + 3*200)/13630)/10;
                document.getElementById("REP250").innerHTML = Math.floor(abiltotal[5]*(abiltotal[11] + 3*250)/13630)/10;
                document.getElementById("REP300").innerHTML = Math.floor(abiltotal[5]*(abiltotal[11] + 3*300)/13630)/10;
                document.getElementById("REP40").innerHTML = Math.floor(abiltotal[5]*(abiltotal[11] + 3*NUM40)/13630)/10;
                document.getElementById("REP45").innerHTML = Math.floor(abiltotal[5]*(abiltotal[11] + 3*NUM45)/13630)/10;

                //구조방어계산
                document.getElementById("RES100").innerHTML = Math.floor(abiltotal[6]*(abiltotal[11] + 3*100)/17074)*2;
                document.getElementById("RES150").innerHTML = Math.floor(abiltotal[6]*(abiltotal[11] + 3*150)/17074)*2;
                document.getElementById("RES180").innerHTML = Math.floor(abiltotal[6]*(abiltotal[11] + 3*180)/17074)*2;
                document.getElementById("RES200").innerHTML = Math.floor(abiltotal[6]*(abiltotal[11] + 3*200)/17074)*2;
                document.getElementById("RES250").innerHTML = Math.floor(abiltotal[6]*(abiltotal[11] + 3*250)/17074)*2;
                document.getElementById("RES300").innerHTML = Math.floor(abiltotal[6]*(abiltotal[11] + 3*300)/17074)*2;
                document.getElementById("RES40").innerHTML = Math.floor(abiltotal[6]*(abiltotal[11] + 3*NUM40)/17074)*2;
                document.getElementById("RES45").innerHTML = Math.floor(abiltotal[6]*(abiltotal[11] + 3*NUM45)/17074)*2;
                
                //연사캡계산
                if(treedata[1].indexOf("병기")>0){
                document.getElementById("RLD100").innerHTML = Math.floor(abiltotal[2]*(abiltotal[11] + 3*100)/1950)/10;
                document.getElementById("RLD150").innerHTML = Math.floor(abiltotal[2]*(abiltotal[11] + 3*150)/1950)/10;
                document.getElementById("RLD180").innerHTML = Math.floor(abiltotal[2]*(abiltotal[11] + 3*180)/1950)/10;
                document.getElementById("RLD200").innerHTML = Math.floor(abiltotal[2]*(abiltotal[11] + 3*200)/1950)/10;
                document.getElementById("RLD250").innerHTML = Math.floor(abiltotal[2]*(abiltotal[11] + 3*250)/1950)/10;
                document.getElementById("RLD300").innerHTML = Math.floor(abiltotal[2]*(abiltotal[11] + 3*300)/1950)/10;
                document.getElementById("RLD40").innerHTML = Math.floor(abiltotal[2]*(abiltotal[11] + 3*NUM40)/1950)/10;
                document.getElementById("RLD45").innerHTML = Math.floor(abiltotal[2]*(abiltotal[11] + 3*NUM45)/1950)/10;
                }
            }
			);
		}

		function treeip(e) {
            // 입력된 수병트리를 구글DB 검색값으로 보내는 부분
            input = e.value;
            document.getElementById("tree_sel").innerHTML = input;
            document.getElementById("tree_sel1").innerHTML = "병종 - " + input + " / ";
			params["treeinput"] = input;
			gen_url();
		}

        function searchTree(e) {
            // 입력된 국가를 구글DB 검색값으로 보내는 부분
            input = e.value;
            document.getElementById("nation_sel").innerHTML = input;
            document.getElementById("nation_sel1").innerHTML = "국가 - " + input + " / ";
			params["nationinput"] = input;
			gen_url();

            // 입력된 국가에 대해 수병트리 셀렉트BOX내용을 바꾸는 부분
            form = document.sailor_search;
            nationsel = form.nation_sel.value;
            treesel = form.tree_sel;

			var unsailor = ["--병종선택--", "함장", "연연연포병", "기관병", "수리병", "정찰기", "전투기", "뇌격기", "급강하폭격기", "어뢰병", "음탐병 (늦직권장)", "잠항병", "갑판병", "의무병"];
            var rnsailor = ["--병종선택--", "함장", "연사포병", "대공포병 (늦직권장)", "기관병", "수리병", "정찰기", "전투기", "뇌격기", "급강하폭격기", "어뢰병", "음탐병 (늦직권장)", "잠항병", "갑판병"];
            var insailor = ["--병종선택--", "함장", "포병", "양용포병 (늦직권장)", "기관병", "수리병", "정찰기", "전투기", "뇌격기", "급강하폭격기", "특수어뢰병", "고속어뢰병", "음탐병 (늦직권장)", "잠항병", "갑판병"];
            var kmsailor = ["--병종선택--", "함장", "포병", "대공포병", "기관병", "수리병", "정찰기", "전투기", "뇌격기", "급강하폭격기", "어뢰병", "음탐병 (늦직권장)", "잠항병", "갑판병", "의무병"];
            var mnsailor = ["--병종선택--", "함장", "포병", "기관병", "수리병", "정찰기", "전투기", "뇌격기", "급강하폭격기", "어뢰병", "음탐병 (늦직권장)", "잠항병", "갑판병"];
            var snsailor = ["--병종선택--", "함장", "포병", "기관병", "수리병", "정찰기", "전투기", "뇌격기", "급강하폭격기", "어뢰병", "음탐병 (늦직권장)", "잠항병", "갑판병"];
            var rmsailor = ["--병종선택--", "함장", "포병", "기관병", "수리병", "정찰기", "전투기", "뇌격기", "급강하폭격기", "어뢰병", "음탐병 (늦직권장)", "잠항병", "갑판병"];

            if (nationsel == "미국") {
                for (i = treesel.length-1; i > 0; i--) {
                    treesel.options[i].value = null;
                    treesel.options[i] = null;
                }
                for (i = 0; i < unsailor.length; i++){
                    treesel.options[i] = new Option(unsailor[i],1);
                    treesel.options[i].value = unsailor[i];
                }
            }
            else if (nationsel == "영국") {
                for (i = treesel.length-1; i > 0; i--) {
                    treesel.options[i].value = null;
                    treesel.options[i] = null;
                }
                for (i = 0; i < rnsailor.length; i++){
                    treesel.options[i] = new Option(rnsailor[i],1);
                    treesel.options[i].value = rnsailor[i];
                }
            }
            else if (nationsel == "일본") {
                for (i = treesel.length-1; i > 0; i--) {
                    treesel.options[i].value = null;
                    treesel.options[i] = null;
                }
                for (i = 0; i < insailor.length; i++){
                    treesel.options[i] = new Option(insailor[i],1);
                    treesel.options[i].value = insailor[i];
                }
            }
            else if (nationsel == "독일") {
                for (i = treesel.length-1; i > 0; i--) {
                    treesel.options[i].value = null;
                    treesel.options[i] = null;
                }
                for (i = 0; i < kmsailor.length; i++){
                    treesel.options[i] = new Option(kmsailor[i],1);
                    treesel.options[i].value = kmsailor[i];
                }
            }
            else if (nationsel == "프랑스") {
                for (i = treesel.length-1; i > 0; i--) {
                    treesel.options[i].value = null;
                    treesel.options[i] = null;
                }
                for (i = 0; i < mnsailor.length; i++){
                    treesel.options[i] = new Option(mnsailor[i],1);
                    treesel.options[i].value = mnsailor[i];
                }
            }
            else if (nationsel == "소련") {
                for (i = treesel.length-1; i > 0; i--) {
                    treesel.options[i].value = null;
                    treesel.options[i] = null;
                }
                for (i = 0; i < snsailor.length; i++){
                    treesel.options[i] = new Option(snsailor[i],1);
                    treesel.options[i].value = snsailor[i];
                }
            }
            else if (nationsel == "이탈리아") {
                for (i = treesel.length-1; i > 0; i--) {
                    treesel.options[i].value = null;
                    treesel.options[i] = null;
                }
                for (i = 0; i < rmsailor.length; i++){
                    treesel.options[i] = new Option(rmsailor[i],1);
                    treesel.options[i].value = rmsailor[i];
                }
            }
        }
                // Automatic Slideshow - change image every 4 seconds
                var myIndex = 0;
                carousel();

                function carousel() {
                var i;
                var x = document.getElementsByClassName("mySlides");
                for (i = 0; i < x.length; i++) {
                    x[i].style.display = "none";  
                }
                myIndex++;
                if (myIndex > x.length) {myIndex = 1}    
                x[myIndex-1].style.display = "block";  
                setTimeout(carousel, 4000);    
                }

                // Used to toggle the menu on small screens when clicking on the menu button
                function myFunction() {
                var x = document.getElementById("navDemo");
                if (x.className.indexOf("w3-show") == -1) {
                    x.className += " w3-show";
                } else { 
                    x.className = x.className.replace(" w3-show", "");
                }
                }

                // When the user clicks anywhere outside of the modal, close it
                var modal = document.getElementById('ticketModal');
                window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
                }
	</script>

</html>



